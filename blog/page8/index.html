<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>GeoServer Blog</title>
    <meta name="viewport" content="width=device-width">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,800" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/bootstrap-3.0.3.min.css">
    <link rel="stylesheet" href="/css/ol.css"/>
    <link rel="stylesheet" href="/css/app.css">
    <link rel="alternate" type="application/atom+xml" title="Atom feed" href="https://geoserver.org/feed.xml">

    <link rel="shortcut icon" href="/favicon.ico">
  </head>

  <body >
      <nav class="navbar" role="navigation">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" 
              data-target="#gs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">GeoServer</a>
    </div>

    <div class="collapse navbar-collapse" id="gs-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/about">About</a>
        </li>
        <li>
          <a href="/blog" target="_blank">Blog</a>
        </li>        
        <li>
          <a href="/download">Download</a>
        </li>
        <li>
          <a href="http://docs.geoserver.org">Documentation</a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/comm">Community Support</a></li>
            <li><a href="/support">Commercial Support</a></li>
            <li><a href="/issues">Issue Tracker</a></li>
            <li><a href="/devel">Community Development</a></li>
            <li><a href="/sponsor">Sponsorship</a></li>
            <li><a href="/roadmap">Roadmap</a></li>
            <li><a href="https://github.com/geoserver/geoserver/wiki/Home" target="_blank">Wiki</a></li>
            <li><a href="https://github.com/geoserver/geoserver/graphs/contributors">Contributors</a></li>
            <li><a href="https://github.com/geoserver/geoserver/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
            <li><a href="/license">License</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <a href="https://github.com/geoserver/geoserver" target="_blank">
      <img style="position: absolute; top: 0; right: 0; border: 0;"
           decoding="async" loading="lazy" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_green_007200.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1">
    </a>
  </nav>

      <div class="background">
        <div class="post-body">
          <div class="wrapper blog">
            <div class="content">
              <div class="post">

                <header class="post-header">
                  <h1 class="post-title">GeoServer Blog</h1>
                  <p class="post-meta"></p>
                </header>

                <article class="post-content">
                  <style>
.content section:last-child {
    padding-bottom: 20px;
}
</style>

<!-- This loops through the paginated posts -->

<div class="content">
  <div class="post post-preview">

    <header class="post-header">
      <h1 class="post-title"><a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html" >Jiffle and GeoTools RCE vulnerabilities</a></h1>
      <p class="post-meta">Apr 11, 2022 • Andrea Aime</p>
    </header>

    <article class="post-content">
      <p>A few critical vulnerabilities have been located in the GeoServer ecosystem that 
allow Remote Code Execution. This article describes the vulnerabilities, their mitigation,
and links to patched versions of the various projects involved.</p>

<p>All the issues described in this post have been patched in:</p>

<ul>
  <li>GeoServer <a href="/release/2.20.4/">2.20.4</a>, <a href="/release/2.19.6/">2.19.6</a> or <a href="/release/2.198.6/">2.18.6</a></li>
  <li>GeoWebCache <a href="https://sourceforge.net/projects/geowebcache/files/geowebcache/1.20.2/">1.20.2</a>, <a href="https://sourceforge.net/projects/geowebcache/files/geowebcache/1.19.3/">1.19.3</a> or <a href="https://sourceforge.net/projects/geowebcache/files/geowebcache/1.18.5/">1.18.5</a></li>
  <li>GeoTools <a href="https://sourceforge.net/projects/geotools/files/GeoTools%2026%20Releases/26.4/">26.4</a>, <a href="https://sourceforge.net/projects/geotools/files/GeoTools%2025%20Releases/25.6/">25.6</a> or <a href="https://sourceforge.net/projects/geotools/files/GeoTools%2025%20Releases/24.6/">24.6</a></li>
  <li>JAI-EXT <a href="https://github.com/geosolutions-it/jai-ext/releases/tag/1.1.22">1.1.22</a></li>
</ul>

<p>The rest of the POST describes the issues and their mitigation.</p>

<h2 id="rce-in-jiffle">RCE in Jiffle</h2>

<p>The Jiffle map algebra language, provided by jai-ext, allows efficiently execute map algebra over large images.
A vulnerability has been recently found in Jiffle, that allows a Code Injection to be performed by properly crafting a Jiffle invocation.</p>

<p>In the case of GeoServer, the injection can be performed from a remote request.</p>

<h3 id="assessment">Assessment</h3>

<p><strong>GeoTools</strong> includes the Jiffle language as part of the <code class="language-plaintext highlighter-rouge">gt-process-raster-&lt;version&gt;</code> module, applications
using it should check whether it’s possible to provide a Jiffle script from remote, and if so, upgrade
or remove the functionality (see also the GeoServer mitigation, below).</p>

<p><strong>Stand-alone GeoWebCache</strong> is not affected, as it does not include Jiffle support.</p>

<p>The issue is of particular interest for <strong>GeoServer</strong> users, as GeoServer embeds Jiffle in the base WAR
package. Jiffle is available as a OGC function, for usage in SLD rendering transformations.</p>

<p>This allows for a Remote Code Execution in properly crafted OGC requests, as well as from the
administration console, when editing SLD files.</p>

<h3 id="mitigations">Mitigations</h3>

<p>In case you cannot upgrade at once, then the following mitigation is strongly recommended:</p>

<ol>
  <li>Stop GeoServer</li>
  <li>Open the war file, get into <code class="language-plaintext highlighter-rouge">WEB-INF/lib</code> and remove the <code class="language-plaintext highlighter-rouge">janino-&lt;version&gt;.jar</code></li>
  <li>Restart GeoServer.</li>
</ol>

<p>This effectively removes the Jiffle ability to compile scripts in Java code, from any of the potential
attack vectors (Janino is the library used to turn the Java code generated from the Jiffle script,
into executable bytecode).</p>

<p>GeoServer should still work properly after the removal, but any attempt to use Jiffle will result in an exception.</p>

<h3 id="resolution">Resolution</h3>

<p>Issue:</p>

<ul>
  <li><a href="https://osgeo-org.atlassian.net/browse/GEOS-10458">GEOS-10458</a> Upgrade to JAI-EXT 1.1.22</li>
</ul>

<h2 id="rce-in-jndi-lookups">RCE in JNDI lookups</h2>

<p>The GeoTools data stores, as well as the disk quota mechanism of GeoWebCache, and the JDBC user/role
providers for GeoServer can all fetch connection pools from JNDI.</p>

<p>A properly crafted JNDI source name can cause uncontrolled deserialization of classes and eventually
a Remote Code Execution, in a way similar to Log4Shell. However, unlike Log4Shell, it requires the
administrator to enter these strings.</p>

<h3 id="mitigations-1">Mitigations</h3>

<p>In terms of mitigation, <strong>GeoTools</strong> users should make sure the JNDI strings given to stores cannot
be provided from remote, or external parties, without validation.</p>

<p><strong>Stand-alone GeoWebCache</strong> users must now allow external or remote users to change the 
disk quota XML configuration files, guarding both local file system access, and the REST
configuration API. The REST API can only be accessed authenticating as administrator, 
good practices in this regard involve:</p>
<ul>
  <li>Disallowing remote access to the “/rest” endpoint in a GeoWebCache installation</li>
  <li>Rotating the administrator passwords.</li>
</ul>

<p>GeoServer is affected though the Web administration interface and the REST configuration API,
both of which require an administrator login to be used in order to setup JNDI connection strings.
In order to mitigate the issue:</p>
<ul>
  <li>Disallow remote access to the “/rest” and “/web” endpoints in a GeoServer installation.</li>
  <li>Change/rotate the administrator passwords.</li>
</ul>

<h3 id="resolution-1">Resolution</h3>

<p>The following issues have been resolved, and patched releases are available.</p>

<p>Issue:</p>

<ul>
  <li><a href="https://osgeo-org.atlassian.net/browse/GEOT-7115">GEOT-7115</a> Streamline JNDI lookups</li>
</ul>

<p>Thanks to Andrea Aime (GeoSolutions) for working so hard on this fix.</p>

<h2 id="springshell">SpringShell</h2>

<p>Both GeoServer and GeoWebCache use Spring MVC, for REST API controllers in both projects,
and for the OGC API, GSR and taskmanager community  modules, in GeoServer.
The projects are commonly deployed as WAR files in Tomcat, with a fair amount of deploys
using Java 11 and above.</p>

<p>This sets up both projects for exploit via the <a href="https://spring.io/blog/2022/03/31/spring-framework-rce-early-announcement">SpringShell vulnerability</a>.
however we <a href="/vulnerability/2022/04/01/spring.html">looked</a>, and could not find an actual attack vector.</p>

<p>This release train updates to newer a version of spring-framework that patched this potential issue.</p>

<h3 id="mitigations-2">Mitigations</h3>

<p>For those that cannot upgrade, the recommended mitigations are:</p>
<ul>
  <li>Run GeoServer and GeoWebCache on Java 8 instead, which is not vulnerable to the issue.</li>
  <li>Upgrade Tomcat to <a href="https://spring.io/blog/2022/04/01/spring-framework-rce-mitigation-alternative">the releases that patched the attack vector</a>, either 9.0.62 or 8.5.78 (don’t try to use Tomcat 10.x, GeoServer cannot run on it due to incompatible J2EE libraries).</li>
  <li>For extra security, limit access to the REST API, and remove community modules providing new service endpoints (OGC API, GSR, taskmanager).</li>
</ul>

<h3 id="resolution-2">Resolution</h3>

<p>Although GeoServer <a href="/vulnerability/2022/04/01/spring.html">assessment</a> did not identify any issue
we have now updated the the spring framework library.</p>

<p>Issue:</p>

<ul>
  <li><a href="https://osgeo-org.atlassian.net/browse/GEOS-10445">GEOS-10445</a> Upgrade springframework from
5.1.20.RELEASE to 5.2.20.RELEASE</li>
</ul>

<p>Thanks to Gabriel Roldan (camptocamp) for troubleshooting and performing this spring-framework update.</p>

    </article>

  </div>
  <div class="post-more"><a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html" >Read More</a></div>
</div>

<div class="content">
  <div class="post post-preview">

    <header class="post-header">
      <h1 class="post-title"><a href="/announcements/vulnerability/2022/04/11/geoserver-2-20-4-released.html" >GeoServer 2.20.4 Released</a></h1>
      <p class="post-meta">Apr 11, 2022 • Andrea Aime</p>
    </header>

    <article class="post-content">
      <p>GeoServer <a href="/release/2.20.4/">2.20.4</a> release is now available with downloads (<a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.20.4/geoserver-2.20.4-bin.zip/download">bin</a>, <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.20.4/geoserver-2.20.4-war.zip/download">war</a>, <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.20.4/GeoServer-2.20.4-winsetup.exe/download">windows</a>), along with <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.20.4/geoserver-2.20.4-htmldoc.zip/download">docs</a> and <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.20.4/extensions/">extensions</a>.</p>

<p>This is a stable release of the 2.20.x series recommended for production systems. This release was made in conjunction with GeoTools 26.4.</p>

<p>Thanks to everyone who contributed, and to Andrea Aime (GeoSolutions) and Jody Garnett (GeoCat) for making this release.</p>

<h3 id="security-considerations">Security Considerations</h3>

<p>This release includes several security enhancements and is a recommended upgrade for production systems.</p>

<p>This release includes two improvements addressing <a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a>:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10458">GEOS-10458</a> Upgrade to JAI-EXT 1.1.22</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOT-7115">GEOT-7115</a> Streamline JNDI lookups</p>
  </li>
</ul>

<p>This release also includes:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10445">GEOS-10445</a> Upgrade springframework from 5.1.20.RELEASE to 5.2.20.RELEASE</p>

    <p>Although GeoServer <a href="/vulnerability/2022/04/01/spring.html">assessment</a> did not identify any issue we have now updated the the spring framework library.</p>
  </li>
</ul>

<h3 id="add-styles-support-to-layergroup">Add Styles support to LayerGroup</h3>

<p>Allows layer group (layer mode <code class="language-plaintext highlighter-rouge">SINGLE</code> or <code class="language-plaintext highlighter-rouge">OPAQUE</code>) list alternate styles in addition to the default one. Each alternate style is
defined by a named configuration of layers and styles providing a unique visual representation.</p>

<ul>
  <li><a href="https://osgeo-org.atlassian.net/browse/GEOS-10252">GEOS-10252</a> Add Styles support to LayerGroup</li>
  <li><a href="https://osgeo-org.atlassian.net/browse/GEOS-10274">GEOS-10274</a> Geofence follow up LayerGroup Style addition</li>
</ul>

<p>For more information see <a href="https://github.com/geoserver/geoserver/wiki/GSIP-205">GSIP-205 Add Styles support to LayerGroup</a> proposa.</p>

<h3 id="improvements-and-fixes">Improvements and Fixes</h3>

<p>Improvements:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10434">GEOS-10434</a> Externalized GeoServer environment properties</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10427">GEOS-10427</a> Improve access check in ImportProcess</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10409">GEOS-10409</a> Improve deletion of WPS Execute input temp files</p>
  </li>
</ul>

<p>Fixes:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10437">GEOS-10437</a> Breaking SLD 1.1 style by REST upload</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10419">GEOS-10419</a> NullPointerException from GeoServerOAuthAuthenticationFilter</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10418">GEOS-10418</a> Bad request sent to GeoFence when matching roles only</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10401">GEOS-10401</a> WPS GetExecutionResult doesn’t validate the mimetype parameter</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10400">GEOS-10400</a> Disabling WMS dynamic styling does not affect GetLegendGraphic requests</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10393">GEOS-10393</a> WFS-T deletes the wrong features (and further BatchManager issues)</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-9978">GEOS-9978</a> WMS vendor parameter CLIP - ignores TIME/CQL_FILTER and other parameters when using with ImageMosaic</p>
  </li>
</ul>

<p>Tasks:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10445">GEOS-10445</a> Upgrade springframework from 5.1.20.RELEASE to 5.2.20.RELEASE</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10303">GEOS-10303</a> Upgrade to jackson 2.13.2</p>
  </li>
</ul>

<p>For more information see <a href="https://github.com/geoserver/geoserver/releases/tag/2.20.4">2.20.4 release notes</a>.</p>

<h2 id="about-geoserver-220">About GeoServer 2.20</h2>

<p>Additional information on GeoServer 2.20 series:</p>

<ul>
  <li><a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a></li>
  <li><a href="/vulnerability/2022/04/01/spring.html">Spring RCE Spring4Shell CVE-2022-22965 assessment</a></li>
  <li><a href="/vulnerability/2021/12/13/logj4-rce-statement.html">Log4J2 zero day vulnerability assessment</a></li>
  <li><a href="https://docs.geoserver.org/latest/en/user/services/internationalization/index.html">Internationalization of title and abstract</a></li>
  <li><a href="https://docs.google.com/presentation/d/19Cmld0_VFePh1g4qUSfqNWWB0t-teClFpT3eUqpYGos/edit?usp=sharing">State of GeoServer 2.20 edition</a></li>
  <li><a href="https://docs.geoserver.org/stable/en/user/installation/win_installer.html">Windows Installer</a></li>
</ul>

<p>Release notes: ( <a href="https://github.com/geoserver/geoserver/releases/tag/2.20.4">2.20.4</a>
| <a href="https://github.com/geoserver/geoserver/releases/tag/2.20.3">2.20.3</a>
| <a href="https://github.com/geoserver/geoserver/releases/tag/2.20.2">2.20.2</a>
| <a href="https://github.com/geoserver/geoserver/releases/tag/2.20.1">2.20.1</a>
| <a href="https://github.com/geoserver/geoserver/releases/tag/2.20.0">2.20.0</a>
| <a href="https://github.com/geoserver/geoserver/releases/tag/2.20-RC">2.20-RC</a> )</p>

    </article>

  </div>
  <div class="post-more"><a href="/announcements/vulnerability/2022/04/11/geoserver-2-20-4-released.html" >Read More</a></div>
</div>

<div class="content">
  <div class="post post-preview">

    <header class="post-header">
      <h1 class="post-title"><a href="/announcements/2022/04/11/geoserver-2-19-6-released.html" >GeoServer 2.19.6 Released</a></h1>
      <p class="post-meta">Apr 11, 2022 • Andrea Aime</p>
    </header>

    <article class="post-content">
      <p>GeoServer <a href="/release/2.19.6/">2.19.6</a> release is now available with downloads (<a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.19.6/geoserver-2.19.6-bin.zip/download">bin</a>, <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.19.6/geoserver-2.19.6-war.zip/download">war</a>, <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.19.6/GeoServer-2.19.6-winsetup.exe/download">windows</a>), along with <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.19.6/geoserver-2.19.6-htmldoc.zip/download">docs</a> and <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.19.6/extensions/">extensions</a>.</p>

<p>This is an extra maintenance release of the 2.19.x series recommended for production systems. This release was made in conjunction with GeoTools 25.6.</p>

<p>Thanks to everyone who contributed, and to Andrea Aime (GeoSolutions) for making this release.</p>

<h3 id="security-considerations">Security Considerations</h3>

<p>This release includes several security enhancements and is a recommended upgrade for production systems.</p>

<p>This release includes two improvements addressing <a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a>:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10458">GEOS-10458</a> Upgrade to JAI-EXT 1.1.22</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOT-7115">GEOT-7115</a> Streamline JNDI lookups</p>
  </li>
</ul>

<p>This release also includes:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10445">GEOS-10445</a> Upgrade springframework from 5.1.20.RELEASE to 5.2.20.RELEASE</p>

    <p>Although GeoServer <a href="/vulnerability/2022/04/01/spring.html">assessment</a> did not identify any issue we have now updated the the spring framework library.</p>
  </li>
</ul>

<h3 id="improvements-and-fixes">Improvements and Fixes</h3>

<p>Fixes:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10437">GEOS-10437</a> Breaking SLD 1.1 style by REST upload</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10336">GEOS-10336</a> INSPIRE failure: version not propagated in GetCapabilities LegendURL</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-9978">GEOS-9978</a> WMS vendor parameter CLIP - ignores TIME/CQL_FILTER and other parameters when using with ImageMosaic</p>
  </li>
</ul>

<p>Tasks:</p>

<ul>
  <li><a href="https://osgeo-org.atlassian.net/browse/GEOS-10303">GEOS-10303</a> Upgrade to jackson 2.13.2</li>
</ul>

<p>For more information see <a href="https://github.com/geoserver/geoserver/releases/tag/2.19.6">2.19.6 release notes</a>.</p>

<h2 id="about-geoserver-219">About GeoServer 2.19</h2>

<p>Additional information on GeoServer 2.19 series:</p>

<ul>
  <li><a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a></li>
  <li><a href="/vulnerability/2021/12/13/logj4-rce-statement.html">Log4J2 zero day vulnerability assessment</a></li>
  <li><a href="https://docs.geoserver.org/stable/en/user/tutorials/ GetFeatureInfo/raster.html">WMS GetFeatureInfo includes labels from ColorMap </a></li>
  <li><a href="https://github.com/geoserver/geoserver/wiki/GSIP-196">Promote WMTS multidim to extension</a></li>
  <li><a href="https://github.com/geoserver/geoserver/wiki/GSIP-195">Promote WPS-Download to extension</a></li>
  <li><a href="https://github.com/geoserver/geoserver/wiki/GSIP-194">Promote params-extractor to extension</a></li>
  <li><a href="https://github.com/geoserver/geoserver/wiki/GSIP-193">Promote GWC-S3 to extension</a></li>
  <li><a href="https://github.com/geoserver/geoserver/wiki/GSIP-197">Promote WPS-JDBC to extension status</a></li>
  <li><a href="https://github.com/geoserver/geoserver/wiki/GSIP-200">Promote MapML to extension status</a></li>
  <li><a href="main-branch.html">GeoServer repository transition to main branch</a></li>
</ul>

<p>Release notes ( <a href="https://github.com/geoserver/geoserver/releases/tag/2.19.6">2.19.6</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16839">2.19.5</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16832">2.19.4</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16824">2.19.3</a>
| <a href="https://osgeo-org.atlassian.net/jira/secure/ReleaseNote.jspa? projectId=10000&amp;version=16821">2.19.2</a>
| <a href="https://osgeo-org.atlassian.net/jira/secure/ReleaseNote.jspa? projectId=10000&amp;version=16816">2.19.1</a>
| <a href="https://osgeo-org.atlassian.net/jira/secure/ReleaseNote.jspa? projectId=10000&amp;version=16814">2.19.0</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa? projectId=10000&amp;version=16766">2.19-RC</a> )</p>

    </article>

  </div>
  <div class="post-more"><a href="/announcements/2022/04/11/geoserver-2-19-6-released.html" >Read More</a></div>
</div>

<div class="content">
  <div class="post post-preview">

    <header class="post-header">
      <h1 class="post-title"><a href="/announcements/2022/04/11/geoserver-2-18-6-released.html" >GeoServer 2.18.6 Released</a></h1>
      <p class="post-meta">Apr 11, 2022 • Andrea Aime</p>
    </header>

    <article class="post-content">
      <p>GeoServer <a href="/release/2.18.6/">2.18.6</a> release is now available with downloads (<a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.18.6/geoserver-2.18.6-bin.zip/download">bin</a>, <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.18.6/geoserver-2.18.6-war.zip/download">war</a>, <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.18.6/GeoServer-2.18.6-winsetup.exe/download">windows</a>), along with <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.18.6/geoserver-2.18.6-htmldoc.zip/download">docs</a> and <a href="https://sourceforge.net/projects/geoserver/files/GeoServer/2.18.6/extensions/">extensions</a>.</p>

<p>This is an extra maintenance release of the 2.18.x series recommended for production systems that have not yet upgraded to 2.19. This release was made in conjunction with GeoTools 24.6.</p>

<p>Thanks to everyone who contributed, and to Andrea Aime (GeoSolutions) and Jody Garnett (GeoCat) for making this release.</p>

<h3 id="security-considerations">Security Considerations</h3>

<p>This release includes security enhancements and is a recommended upgrade for production systems.</p>

<p>This release includes two improvements addressing <a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a>:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10458">GEOS-10458</a> Upgrade to JAI-EXT 1.1.22</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOT-7115">GEOT-7115</a> Streamline JNDI lookups</p>
  </li>
</ul>

<p>This release also includes:</p>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10445">GEOS-10445</a> Upgrade Spring Framework from 5.1.20.RELEASE to 5.2.20.RELEASE</p>

    <p>Although GeoServer <a href="/vulnerability/2022/04/01/spring.html">assessment</a> did not identify any issue we have now updated the the spring framework library.</p>
  </li>
</ul>

<h3 id="improvements-and-fixes">Improvements and Fixes</h3>

<ul>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10437">GEOS-10437</a> Breaking SLD 1.1 style by REST upload</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10249">GEOS-10249</a> GWC produce NPE when it comes to race condition</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10215">GEOS-10215</a> Layers nested inside a group maintain their prefix even in workspace specific services</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10213">GEOS-10213</a> WMS requests fail on LayerGroup default style names, when used in GetMap/GetFeatureInfo/GetLegendGraphics</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10200">GEOS-10200</a> GetLegendGraphic can fail if SCALE removes all rules</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10321">GEOS-10321</a> WCS 2.0 might fail to return coverages whose native BBOX goes slighly outside of the dateline</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10194">GEOS-10194</a> Improve importer LOGGING</p>
  </li>
  <li>
    <p><a href="https://osgeo-org.atlassian.net/browse/GEOS-10335">GEOS-10335</a> Update GeoServer to a log4j version that does not support RCEs</p>
  </li>
</ul>

<p>For more information see <a href="https://github.com/geoserver/geoserver/releases/tag/2.18.6">2.18.6 release notes</a>.</p>

<h2 id="about-geoserver-218">About GeoServer 2.18</h2>

<p>Additional information on GeoServer 2.18 series:</p>

<ul>
  <li><a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a></li>
  <li><a href="/vulnerability/2021/12/13/logj4-rce-statement.html">Log4J2 zero day vulnerability assessment</a></li>
  <li>State of GeoServer 2.18 (<a href="https://docs.google.com/presentation/d/1Q0pHRUcvucAuHDeZPoeDJG4UY5izwbqo8ZawUdk9xYM/edit?usp=sharing">slides</a>)</li>
  <li>
    <table>
      <tbody>
        <tr>
          <td>GeoServer Orientation (<a href="https://t.co/fvBTLMia6f?amp=1">slides</a></td>
          <td><a href="https://youtu.be/bdkk5eVR674">video</a>)</td>
        </tr>
      </tbody>
    </table>
  </li>
</ul>

<p>Release Notes ( <a href="https://github.com/geoserver/geoserver/releases/tag/2.18.6">2.18.6</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16822">2.18.5</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16819">2.18.4</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16808">2.18.3</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16803">2.18.2</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16800">2.18.1</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16796">2.18.0</a>
| <a href="https://osgeo-org.atlassian.net/secure/ReleaseNote.jspa?projectId=10000&amp;version=16783">2.18-RC</a> )</p>

    </article>

  </div>
  <div class="post-more"><a href="/announcements/2022/04/11/geoserver-2-18-6-released.html" >Read More</a></div>
</div>

<div class="content">
  <div class="post post-preview">

    <header class="post-header">
      <h1 class="post-title"><a href="/vulnerability/2022/04/01/spring.html" >Spring4Shell RCE vulnerability</a></h1>
      <p class="post-meta">Apr 1, 2022 • Ian Turton</p>
    </header>

    <article class="post-content">
      <p>A vulnerability has located in the Spring Framework  ecosystem that 
allow Remote Code Execution. This article describes the vulnerability, assessment, mitigation,
and links to patched versions of the various projects involved.</p>

<p>Please do not contact us asking about this vulnerability unless you are <strong>reporting an actual
demonstration of the problem</strong> in a GeoServer installation or are offering to assist
in the upgrade process with developer time or money.</p>

<p>If you wish to report a security vulnerability, see instructions on <a href="http://geoserver.org/issues/">responsible reporting</a>.
We also welcome <a href="https://github.com/geoserver/geoserver/wiki/Sponsor">your direct financial support</a>.</p>

<h1 id="spring4shell-cve-2022-22965">Spring4Shell (CVE-2022-22965)</h1>

<p>A recently discovered vulnerability in the Spring 
(<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-22965">CVE-2022-22965</a>) has been reported as 
affecting systems running Java 9+.</p>

<p><strong>Note</strong> systems using Java 8 are not thought to be vulnerable at this time.</p>

<h2 id="assessment">Assessment</h2>

<p>Both GeoServer and GeoWebCache use Spring MVC, for REST API controllers in both projects,
and for the OGC API, GSR and taskmanager community  modules, in GeoServer.
The projects are commonly deployed as WAR files in Tomcat, with a fair amount of deploys
using Java 11 and above.</p>

<p>This sets up both projects for exploit on the <a href="https://spring.io/blog/2022/03/31/spring-framework-rce-early-announcement">SpringShell vulnerability</a>.</p>

<p>We looked , and <strong>could not find an actual attack vector yet</strong>, but have scheduled a release that contains
a spring-framework update that patches the potential issue.</p>

<h2 id="mitigation">Mitigation</h2>

<p>For those that cannot upgrade, the recommended mitigations are:</p>
<ul>
  <li>Run GeoServer and GeoWebCache on Java 8 instead, which is not vulnerable to the issue.</li>
  <li>Upgrade Tomcat to <a href="https://spring.io/blog/2022/04/01/spring-framework-rce-mitigation-alternative">the releases that patched the attack vector</a>, either 9.0.62 or 8.5.78 (don’t try to use Tomcat 10.x, GeoServer cannot run on it due to incompatible J2EE libraries).</li>
  <li>For extra security, limit access to the REST API, and remove community modules providing new service endpoints (OGC API, GSR, taskmanager).</li>
</ul>

<h2 id="resolution">Resolution</h2>

<p>We are working on upgrading to a patched version of the spring framework library and will post an
update when that work is complete.</p>

<p>Issue:</p>

<ul>
  <li><a href="https://osgeo-org.atlassian.net/browse/GEOS-10445">GEOS-10445</a> Upgrade springframework from
5.1.20.RELEASE to 5.2.20.RELEASE</li>
</ul>

<p>Patched releases:</p>

<ul>
  <li>We have now updated the the spring framework library used, please upgrade to
 <a href="/announcements/vulnerability/2022/04/11/geoserver-2-20-4-released.html">GeoServer 2.20.4</a> stable release,
 or <a href="/announcements/2022/04/11/geoserver-2-19-6-released.html">GeoServer 2.19.6</a> maintenance release.</li>
</ul>

<p>Thanks to everyone who reported this issue, Andrea Aime (GeoSolutions) for initial assessment,
and to Gabriel Roldan (camptocamp) for troubleshooting and performing this spring-framework update.</p>

    </article>

  </div>
  <div class="post-more"><a href="/vulnerability/2022/04/01/spring.html" >Read More</a></div>
</div>


<!-- Pagination links -->
<div class="pagination">
  
    <a href="/blog/page7/" class="previous">
      &laquo; Prev
    </a>
  
  <span class="page_number ">
    8 / 90
  </span>
  
    <a href="/blog/page9/" class="next">Next &raquo;</a>
  <!-- GeoooooooServer  -->
    <span>Ge<a href="/blog">o</a><wbr/><a href="/blog/page2/">o</a><wbr/><a href="/blog/page3/">o</a><wbr/><a href="/blog/page4/">o</a><wbr/><a href="/blog/page5/">o</a><wbr/><a href="/blog/page6/">o</a><wbr/><a href="/blog/page7/">o</a><wbr/><em>o</em><wbr/><a href="/blog/page9/">o</a><wbr/><a href="/blog/page10/">o</a><wbr/><a href="/blog/page11/">o</a><wbr/><a href="/blog/page12/">o</a><wbr/><a href="/blog/page13/">o</a><wbr/><a href="/blog/page14/">o</a><wbr/><a href="/blog/page15/">o</a><wbr/><a href="/blog/page16/">o</a><wbr/><a href="/blog/page17/">o</a><wbr/><a href="/blog/page18/">o</a><wbr/><a href="/blog/page19/">o</a><wbr/><a href="/blog/page20/">o</a><wbr/><a href="/blog/page21/">o</a><wbr/><a href="/blog/page22/">o</a><wbr/><a href="/blog/page23/">o</a><wbr/><a href="/blog/page24/">o</a><wbr/><a href="/blog/page25/">o</a><wbr/><a href="/blog/page26/">o</a><wbr/><a href="/blog/page27/">o</a><wbr/><a href="/blog/page28/">o</a><wbr/><a href="/blog/page29/">o</a><wbr/><a href="/blog/page30/">o</a><wbr/><a href="/blog/page31/">o</a><wbr/><a href="/blog/page32/">o</a><wbr/><a href="/blog/page33/">o</a><wbr/><a href="/blog/page34/">o</a><wbr/><a href="/blog/page35/">o</a><wbr/><a href="/blog/page36/">o</a><wbr/><a href="/blog/page37/">o</a><wbr/><a href="/blog/page38/">o</a><wbr/><a href="/blog/page39/">o</a><wbr/><a href="/blog/page40/">o</a><wbr/><a href="/blog/page41/">o</a><wbr/><a href="/blog/page42/">o</a><wbr/><a href="/blog/page43/">o</a><wbr/><a href="/blog/page44/">o</a><wbr/><a href="/blog/page45/">o</a><wbr/><a href="/blog/page46/">o</a><wbr/><a href="/blog/page47/">o</a><wbr/><a href="/blog/page48/">o</a><wbr/><a href="/blog/page49/">o</a><wbr/><a href="/blog/page50/">o</a><wbr/><a href="/blog/page51/">o</a><wbr/><a href="/blog/page52/">o</a><wbr/><a href="/blog/page53/">o</a><wbr/><a href="/blog/page54/">o</a><wbr/><a href="/blog/page55/">o</a><wbr/><a href="/blog/page56/">o</a><wbr/><a href="/blog/page57/">o</a><wbr/><a href="/blog/page58/">o</a><wbr/><a href="/blog/page59/">o</a><wbr/><a href="/blog/page60/">o</a><wbr/><a href="/blog/page61/">o</a><wbr/><a href="/blog/page62/">o</a><wbr/><a href="/blog/page63/">o</a><wbr/><a href="/blog/page64/">o</a><wbr/><a href="/blog/page65/">o</a><wbr/><a href="/blog/page66/">o</a><wbr/><a href="/blog/page67/">o</a><wbr/><a href="/blog/page68/">o</a><wbr/><a href="/blog/page69/">o</a><wbr/><a href="/blog/page70/">o</a><wbr/><a href="/blog/page71/">o</a><wbr/><a href="/blog/page72/">o</a><wbr/><a href="/blog/page73/">o</a><wbr/><a href="/blog/page74/">o</a><wbr/><a href="/blog/page75/">o</a><wbr/><a href="/blog/page76/">o</a><wbr/><a href="/blog/page77/">o</a><wbr/><a href="/blog/page78/">o</a><wbr/><a href="/blog/page79/">o</a><wbr/><a href="/blog/page80/">o</a><wbr/><a href="/blog/page81/">o</a><wbr/><a href="/blog/page82/">o</a><wbr/><a href="/blog/page83/">o</a><wbr/><a href="/blog/page84/">o</a><wbr/><a href="/blog/page85/">o</a><wbr/><a href="/blog/page86/">o</a><wbr/><a href="/blog/page87/">o</a><wbr/><a href="/blog/page88/">o</a><wbr/><a href="/blog/page89/">o</a><wbr/><a href="/blog/page90/">o</a><wbr/>Server</span>
  
</div>

                </article>

            </div>
          </div>
        </div>
        <div class="sidebar">
          <script>
            function toggleContents(target) {
              if (target.classList.contains('toggled')) {
                target.classList.remove('toggled')
              } else {
                target.classList.add('toggled')
              }
            }
          </script> 
          <div class="sidebar-category" onclick="toggleContents(this)" />
            <h4>&nbsp;Announcements</h4>
            <ul>
              
                <li><a href="/announcements/2023/12/18/geoserver-2-23-4-released.html">GeoServer 2.23.4 Release</a></li>
                
              
                <li><a href="/announcements/2023/11/27/geoserver-2-24-1-released.html">GeoServer 2.24.1 Release</a></li>
                
              
                <li><a href="/announcements/2023/10/30/geoserver-2-23-3-released.html">GeoServer 2.23.3 Release</a></li>
                
              
                <li><a href="/announcements/2023/10/15/geoserver-2-24-0-released.html">GeoServer 2.24.0 Release</a></li>
                
              
                <li><a href="/announcements/2023/09/25/geoserver-2-24-RC-released.html">GeoServer 2.24-RC Release</a></li>
                
              
                <li><a href="/announcements/2023/08/30/geoserver-2-22-5-released.html">GeoServer 2.22.5 Release</a></li>
                
              
                <li><a href="/announcements/2023/07/21/geoserver-2-23-2-released.html">GeoServer 2.23.2 Release</a></li>
                
              
                <li><a href="/announcements/2023/07/04/foss4g-2023.html">GeoServer at FOSS4G 2023</a></li>
                
              
                <li><a href="/announcements/2023/06/19/geoserver-2-22-4-released.html">GeoServer 2.22.4 Release</a></li>
                
              
                <li><a href="/announcements/2023/05/23/geoserver-2-23-1-released.html">GeoServer 2.23.1 Release</a></li>
                
                  
            </ul>
          </div>
          
          <!-- 2019 -->
          
            
            
            
              
            
            
            
            
            
            
          
            
            
            
            
            
              
            
            
            
            
            
            
          
            
            
            
            
            
              
            
            
            
            
            
              
            
            
            
            
            
              
            
            
            
            
            
            
          
            
            
            
            
            
              
            
            
            
            
            
            
          
          
          
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Tutorials</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/tutorials/2024/01/17/geospatial-techno.html">GeoServer About & Status - A Practical Guide</a></li>
                  
                
                  
                  
                  
                  <li><a href="/tutorials/2023/11/30/geospatial-techno.html">GeoServer installation methods on Windows</a></li>
                  
                
                  
                  
                  
                  <li><a href="/tutorials/2023/10/20/geospatial-techno.html">Introducing GeoSpatial Techno with a Video Tutorial</a></li>
                  
                
                  
                  
                  
                  <li><a href="/tutorials/2019/09/03/geoserver-presentations-on-foss4g-2019.html">GeoServer Presentations on FOSS4G 2019</a></li>
                  
                
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
              </ul>
            </div>
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Behind The Scenes</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/behind%20the%20scenes/2024/01/03/roadmap.html">GeoServer 2024 Roadmap Planning</a></li>
                  
                
                  
                  
                  
                  <li><a href="/behind%20the%20scenes/2022/01/20/log4j-upgrade.html">Log4j1 update or replace activity</a></li>
                  
                
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
              </ul>
            </div>
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Vulnerability</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/vulnerability/2023/02/20/ogc-filter-injection.html">OGC Filter Injection Vulnerability Statement</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/11/18/geoserver-2-22-0-released.html">GeoServer 2.22.0 Release</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/10/24/geoserver-2-21-2-released.html">GeoServer 2.21.2 Release</a></li>
                  
                
                  
                  
                  
                  <li><a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/04/11/geoserver-2-20-4-released.html">GeoServer 2.20.4 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/vulnerability/2022/04/01/spring.html">Spring4Shell RCE vulnerability</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/03/08/geoserver-2-20-3-released.html">GeoServer 2.20.3 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/03/08/geoserver-2-19-5-released.html">GeoServer 2.19.5 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2021/12/22/geoserver-2-19-4-released.html">GeoServer 2.19.4 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/vulnerability/2021/12/13/logj4-rce-statement.html">Log4J2 zero day vulnerability assessment</a></li>
                  
                    
              </ul>
            </div>
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Developer notes</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/developer%20notes/2021/03/04/main-branch.html">GeoServer repository transition to main branch</a></li>
                  
                
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
              </ul>
            </div>
          
        </div>
      </div>
      <div id="footer">
    <span class="left"><a href="https://geoserver.org/feed.xml"><img alt="Atom feed" src="https://geoserver.org/img/rss-icon.png" height="16" width="16">Atom feed</a></span>
    <span class="right">
        &copy;2024 <a href="https://www.osgeo.org/">Open Source Geospatial Foundation</a>. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    </span>
</div>

    </div>
        <script src="/js/jquery-1.11.1.min.js"></script>
    <script src="/js/bootstrap-3.0.3.min.js"></script>
    <script src="/js/ol.js"></script>
    <script src="/js/app.js"></script>
    <script>
    $(document).ready(function() {
        if (typeof window.init != "undefined") {
          init();
        }
    });
    </script>
    
  </body>
</html>
