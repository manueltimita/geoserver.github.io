<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Dynamic Symbolizers (Part 2)</title>
    <meta name="viewport" content="width=device-width">
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,800" rel="stylesheet" type="text/css">

    <link rel="stylesheet" href="/css/bootstrap-3.0.3.min.css">
    <link rel="stylesheet" href="/css/ol.css"/>
    <link rel="stylesheet" href="/css/app.css">
    <link rel="alternate" type="application/atom+xml" title="Atom feed" href="https://geoserver.org/feed.xml">

    <link rel="shortcut icon" href="/favicon.ico">
  </head>

  <body >
      <nav class="navbar" role="navigation">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" 
              data-target="#gs-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">GeoServer</a>
    </div>

    <div class="collapse navbar-collapse" id="gs-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a href="/about">About</a>
        </li>
        <li>
          <a href="/blog" target="_blank">Blog</a>
        </li>        
        <li>
          <a href="/download">Download</a>
        </li>
        <li>
          <a href="http://docs.geoserver.org">Documentation</a>
        </li>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="/comm">Community Support</a></li>
            <li><a href="/support">Commercial Support</a></li>
            <li><a href="/issues">Issue Tracker</a></li>
            <li><a href="/devel">Community Development</a></li>
            <li><a href="/sponsor">Sponsorship</a></li>
            <li><a href="/roadmap">Roadmap</a></li>
            <li><a href="https://github.com/geoserver/geoserver/wiki/Home" target="_blank">Wiki</a></li>
            <li><a href="https://github.com/geoserver/geoserver/graphs/contributors">Contributors</a></li>
            <li><a href="https://github.com/geoserver/geoserver/blob/master/CODE_OF_CONDUCT.md">Code of Conduct</a></li>
            <li><a href="/license">License</a></li>
          </ul>
        </li>
      </ul>
    </div>
    <a href="https://github.com/geoserver/geoserver" target="_blank">
      <img style="position: absolute; top: 0; right: 0; border: 0;"
           decoding="async" loading="lazy" width="149" height="149" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_green_007200.png?resize=149%2C149" class="attachment-full size-full" alt="Fork me on GitHub" data-recalc-dims="1">
    </a>
  </nav>

      <div class="background">
        <div class="post-body">
          <div class="wrapper /tips%20and%20tricks/2008/12/16/dynamic-symbolizers-part-2">
            <div class="content">
              <div class="post">

                <header class="post-header">
                  <h1 class="post-title">Dynamic Symbolizers (Part 2)</h1>
                  <p class="post-meta">Dec 16, 2008 • aaime</p>
                </header>

                <article class="post-content">
                  <p>In our <a href="http://blog.geoserver.org/2008/12/08/dynamic-symbolizers-part-1/">previous post on dynamic symbolizers</a>, we saw how we can generate dynamic external symbolizers based on feature attributes using only a simple style (SLD).</p>

<p>Today we’ll see two other features of dynamic symbolizers, namely:</p>

<ul>
  <li>
    <p>using decorative TrueType fonts as markers in your map</p>
  </li>
  <li>
    <p>Programing your own dynamic symbolizer to extend existing ones, with full access to the current feature attributes</p>
  </li>
</ul>

<h2 id="using-decorative-true-type-fonts-as-markers">Using decorative True Type fonts as markers</h2>

<p>As you may already know, the internet is filled with these funny <a href="http://en.wikipedia.org/wiki/Dingbat">dingbat</a> TrueType (TTF) files that do not contain a recognizable font, but instead include a set of symbols. If you are a Windows user, you should be familiar with the <a href="http://en.wikipedia.org/wiki/Wingdings">Wingdings</a> font.</p>

<p>Some commercial GIS software use characters in these fonts as point markers, so it’s no surprise that you can find some TTF fonts with cartographic symbols embedded.</p>

<p>As standard, you can use font characters by leveraging the <strong>TextSymbolizer</strong>.  You can specify a font (say, Wingdings), and then a specific character (or characters) to serve as a point. This works, but has two flaws:</p>

<ol>
  <li>
    <p>Since the markers are labels, not points, they are subject to “conflict resolution.”  Multiple overlapping labels are discarded in favor of a single label.  This means that not all points will necessarily be displayed.</p>
  </li>
  <li>
    <p>You are restricted to choosing the just the fill color of the marker (like a normal character).</p>
  </li>
</ol>

<p>Dynamic symbolizers come to the rescue again.  With dynamic symbolizers, you can use a character in a font as a <strong>PointSymbolizer</strong>.  The syntax for this is specified as:</p>

<p>ttf://FontName#code</p>

<p>Say, for example, that you would like the snowflake symbol from the Wingdings font as a marker in your map. You fire up the Windows <em>charmap</em> utility (the GNOME Character Map program works as well) and learn that the snowflake code is 0x54. (Actually, the code, is in fact 0x<strong>F0</strong>54 (prefix the code with F0).</p>

<p>So your snowflake mark may look like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;span class="nt"&gt;&lt;Mark&gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&lt;WellKnownName&gt;&lt;/span&gt;ttf://Wingdings#0xF054&lt;span class="nt"&gt;&lt;/WellKnownName&gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&lt;Fill&gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&lt;CssParameter&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"fill"&lt;/span&gt;&lt;span class="nt"&gt;&gt;&lt;/span&gt;#000088&lt;span class="nt"&gt;&lt;/CssParameter&gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&lt;/Fill&gt;&lt;/span&gt;
&lt;span class="nt"&gt;&lt;/Mark&gt;&lt;/span&gt;
</code></pre></div></div>

<p>Here is the sample layer sf:archsites drawn with the above mark, and the full SLD.  Notice that the points that overlap are all shown, which would not have happened using a standard TextSymbolizer.</p>

<p><a href="/img/uploads/snow11.png"><img src="/img/uploads/snow11.png" alt="sf:archsites themed with a blue snowflake marerk" /></a></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;span class="cp"&gt;&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;&lt;/span&gt;
&lt;span class="nt"&gt;&lt;StyledLayerDescriptor&lt;/span&gt; &lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;"1.0.0"&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;"http://www.opengis.net/sld"&lt;/span&gt; &lt;span class="na"&gt;xmlns:ogc=&lt;/span&gt;&lt;span class="s"&gt;"http://www.opengis.net/ogc"&lt;/span&gt;
  &lt;span class="na"&gt;xmlns:xlink=&lt;/span&gt;&lt;span class="s"&gt;"http://www.w3.org/1999/xlink"&lt;/span&gt; &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;"http://www.w3.org/2001/XMLSchema-instance"&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;"http://www.opengis.net/sld http://schemas.opengis.net/sld/1.0.0/StyledLayerDescriptor.xsd"&lt;/span&gt;&lt;span class="nt"&gt;&gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&lt;NamedLayer&gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&lt;Name&gt;&lt;/span&gt;Snow symbol&lt;span class="nt"&gt;&lt;/Name&gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&lt;UserStyle&gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&lt;Title&gt;&lt;/span&gt;Snow symbol&lt;span class="nt"&gt;&lt;/Title&gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&lt;Abstract&gt;&lt;/span&gt;Marks each point with a snow symbol&lt;span class="nt"&gt;&lt;/Abstract&gt;&lt;/span&gt;

      &lt;span class="nt"&gt;&lt;FeatureTypeStyle&gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&lt;Rule&gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&lt;Title&gt;&lt;/span&gt;Red square&lt;span class="nt"&gt;&lt;/Title&gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&lt;PointSymbolizer&gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&lt;Graphic&gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&lt;Mark&gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&lt;WellKnownName&gt;&lt;/span&gt;ttf://Wingdings#0xF054&lt;span class="nt"&gt;&lt;/WellKnownName&gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&lt;Fill&gt;&lt;/span&gt;
                  &lt;span class="nt"&gt;&lt;CssParameter&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;"fill"&lt;/span&gt;&lt;span class="nt"&gt;&gt;&lt;/span&gt;#000088&lt;span class="nt"&gt;&lt;/CssParameter&gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&lt;/Fill&gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&lt;/Mark&gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&lt;Size&gt;&lt;/span&gt;12&lt;span class="nt"&gt;&lt;/Size&gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&lt;/Graphic&gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&lt;/PointSymbolizer&gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&lt;/Rule&gt;&lt;/span&gt;

      &lt;span class="nt"&gt;&lt;/FeatureTypeStyle&gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&lt;/UserStyle&gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&lt;/NamedLayer&gt;&lt;/span&gt;
&lt;span class="nt"&gt;&lt;/StyledLayerDescriptor&gt;&lt;/span&gt;
</code></pre></div></div>

<p>Using a TTF character as a PointSymbolizer has another advantage:  you can specify both the fill (inside) color and stroke (outside) color separately.</p>

<p>As we’ve seen before, you also have the option to embed CQL expressions inside the well known name. For example, you could embed the symbol code into a feature attribute, and have <em>each feature use a different marker</em> as a result!</p>

<h2 id="not-happy-with-the-current-symbolizer-sets-build-your-own">Not happy with the current symbolizer sets? Build your own!</h2>

<p>If you’re not happy with the symbolizing capabilities you can now build your own and plug it into GeoServer as any other extensions.</p>

<p>For details of how this can be done have a look at the <a href="http://geotools.codehaus.org/Dynamic+SLD+Graphic+objects">dynamic symbolizer proposal</a> in GeoTools, and see the sample <a href="http://svn.geotools.org/branches/2.5.x/modules/library/render/src/main/java/org/geotools/renderer/style/TTFMarkFactory.java">TTFMarkFactory</a> as an example:</p>

<p>If you haven’t yet employed dynamic symbolizers in your maps, now you have some reasons to do so.  Enjoy!</p>

                </article>

            </div>
          </div>
        </div>
        <div class="sidebar">
          <script>
            function toggleContents(target) {
              if (target.classList.contains('toggled')) {
                target.classList.remove('toggled')
              } else {
                target.classList.add('toggled')
              }
            }
          </script> 
          <div class="sidebar-category" onclick="toggleContents(this)" />
            <h4>&nbsp;Announcements</h4>
            <ul>
              
                <li><a href="/announcements/2023/12/18/geoserver-2-23-4-released.html">GeoServer 2.23.4 Release</a></li>
                
              
                <li><a href="/announcements/2023/11/27/geoserver-2-24-1-released.html">GeoServer 2.24.1 Release</a></li>
                
              
                <li><a href="/announcements/2023/10/30/geoserver-2-23-3-released.html">GeoServer 2.23.3 Release</a></li>
                
              
                <li><a href="/announcements/2023/10/15/geoserver-2-24-0-released.html">GeoServer 2.24.0 Release</a></li>
                
              
                <li><a href="/announcements/2023/09/25/geoserver-2-24-RC-released.html">GeoServer 2.24-RC Release</a></li>
                
              
                <li><a href="/announcements/2023/08/30/geoserver-2-22-5-released.html">GeoServer 2.22.5 Release</a></li>
                
              
                <li><a href="/announcements/2023/07/21/geoserver-2-23-2-released.html">GeoServer 2.23.2 Release</a></li>
                
              
                <li><a href="/announcements/2023/07/04/foss4g-2023.html">GeoServer at FOSS4G 2023</a></li>
                
              
                <li><a href="/announcements/2023/06/19/geoserver-2-22-4-released.html">GeoServer 2.22.4 Release</a></li>
                
              
                <li><a href="/announcements/2023/05/23/geoserver-2-23-1-released.html">GeoServer 2.23.1 Release</a></li>
                
                  
            </ul>
          </div>
          
          <!-- 2019 -->
          
            
            
            
              
            
            
            
            
            
            
          
            
            
            
            
            
              
            
            
            
            
            
            
          
            
            
            
            
            
              
            
            
            
            
            
              
            
            
            
            
            
              
            
            
            
            
            
            
          
            
            
            
            
            
              
            
            
            
            
            
            
          
          
          
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Tutorials</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/tutorials/2024/01/17/geospatial-techno.html">GeoServer About & Status - A Practical Guide</a></li>
                  
                
                  
                  
                  
                  <li><a href="/tutorials/2023/11/30/geospatial-techno.html">GeoServer installation methods on Windows</a></li>
                  
                
                  
                  
                  
                  <li><a href="/tutorials/2023/10/20/geospatial-techno.html">Introducing GeoSpatial Techno with a Video Tutorial</a></li>
                  
                
                  
                  
                  
                  <li><a href="/tutorials/2019/09/03/geoserver-presentations-on-foss4g-2019.html">GeoServer Presentations on FOSS4G 2019</a></li>
                  
                
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
              </ul>
            </div>
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Behind The Scenes</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/behind%20the%20scenes/2024/01/03/roadmap.html">GeoServer 2024 Roadmap Planning</a></li>
                  
                
                  
                  
                  
                  <li><a href="/behind%20the%20scenes/2022/01/20/log4j-upgrade.html">Log4j1 update or replace activity</a></li>
                  
                
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
              </ul>
            </div>
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Vulnerability</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/vulnerability/2023/02/20/ogc-filter-injection.html">OGC Filter Injection Vulnerability Statement</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/11/18/geoserver-2-22-0-released.html">GeoServer 2.22.0 Release</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/10/24/geoserver-2-21-2-released.html">GeoServer 2.21.2 Release</a></li>
                  
                
                  
                  
                  
                  <li><a href="/vulnerability/2022/04/11/geoserver-2-jiffle-jndi-rce.html">Jiffle and GeoTools RCE vulnerabilities</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/04/11/geoserver-2-20-4-released.html">GeoServer 2.20.4 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/vulnerability/2022/04/01/spring.html">Spring4Shell RCE vulnerability</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/03/08/geoserver-2-20-3-released.html">GeoServer 2.20.3 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2022/03/08/geoserver-2-19-5-released.html">GeoServer 2.19.5 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/announcements/vulnerability/2021/12/22/geoserver-2-19-4-released.html">GeoServer 2.19.4 Released</a></li>
                  
                
                  
                  
                  
                  <li><a href="/vulnerability/2021/12/13/logj4-rce-statement.html">Log4J2 zero day vulnerability assessment</a></li>
                  
                    
              </ul>
            </div>
          
            
            
            
            <div class="sidebar-category" onclick="toggleContents(this)" />
              <h4>&nbsp;Developer notes</h4>
              <ul>
                
                  
                  
                  
                  <li><a href="/developer%20notes/2021/03/04/main-branch.html">GeoServer repository transition to main branch</a></li>
                  
                
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
                  
                  
                    
              </ul>
            </div>
          
        </div>
      </div>
      <div id="footer">
    <span class="left"><a href="https://geoserver.org/feed.xml"><img alt="Atom feed" src="https://geoserver.org/img/rss-icon.png" height="16" width="16">Atom feed</a></span>
    <span class="right">
        &copy;2024 <a href="https://www.osgeo.org/">Open Source Geospatial Foundation</a>. License <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution</a>.
    </span>
</div>

    </div>
        <script src="/js/jquery-1.11.1.min.js"></script>
    <script src="/js/bootstrap-3.0.3.min.js"></script>
    <script src="/js/ol.js"></script>
    <script src="/js/app.js"></script>
    <script>
    $(document).ready(function() {
        if (typeof window.init != "undefined") {
          init();
        }
    });
    </script>
    
  </body>
</html>
